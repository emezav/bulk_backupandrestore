define ("tool_bulk_backupandrestore/restore",["jquery","core/config"],function(a,b){var c="",d="",e=0,f=0,g=0,h=function(){var b=a("#restore-table");c=b.data("session");d=b.data("key");var g=a(".record-row");e=g.length;a(".progress-bar").attr("aria-valuenow",0);a(".progress-bar").attr("style","width: 0");a(".progress-bar").html("0%");a(".progress").removeClass("d-none");if(0<e){f=1;i()}},i=function(){g=f;var h=a("#record-"+g),j=h.data("category"),k=h.data("folder"),l=h.data("filename"),m=h.data("name"),n=h.data("shortname"),o=h.data("idnumber"),p=h.data("users"),q=h.data("blocks");if(0<g&&g<=e){var r=b.wwwroot+"/admin/tool/bulk_backupandrestore/restore_course.php";h.addClass("text-primary");h.addClass("border-primary");a("#record-"+g+" > td.status").html("");a.ajax({type:"POST",url:r,dataType:"json",data:{sesskey:c,key:d,category:j,folder:k,filename:l,name:m,shortname:n,idnumber:o,restoreusers:p,restoreblocks:q,last:g==e?!0:!1},success:function success(b){h.removeClass("border-primary");h.removeClass("text-danger");h.removeClass("text-primary");var c=Math.floor(100*(f/e));a(".progress-bar").attr("aria-valuenow",c);a(".progress-bar").attr("style","width: "+c+"%");a(".progress-bar").html(c+"%");a("#record-"+g+" > td.status").html(b.message);if(!0==b.status){h.addClass("text-success")}else{h.addClass("text-danger")}if(g<e){f++;i()}else{a(".progress").hide();a(".result").html(b.result)}},error:function error(){window.console.log("Error on record "+g);h.removeClass("border-primary");h.removeClass("text-success");h.removeClass("text-primary");h.addClass("text-danger");var b=Math.floor(100*(f/e));a(".progress-bar").attr("aria-valuenow",b);a(".progress-bar").attr("style","width: "+b+"%");a(".progress-bar").html(b+"%");if(g<=e){f++;i()}else{a(".progress").hide()}}})}};return{init:function init(){a("#restore_courses").on("click",function(){h()})}}});
//# sourceMappingURL=restore.min.js.map
